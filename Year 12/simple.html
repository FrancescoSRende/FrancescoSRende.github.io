<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>simple</title>
</head>
<body>

    <button id="button1" class="btn teal darken-2 z-depth-0">Sign In</button>





    <div class="input-field col s12">
        <select>
            <option value="" disabled selected>Choose your option</option>
            <option value="1">Option 1</option>
            <option value="2">Option 2</option>
            <option value="3">Option 3</option>
        </select>
        <label>Materialize Select</label>
    </div>













    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/8.2.5/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.5/firebase-database.js"></script>

    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>


    <script>


        document.addEventListener('DOMContentLoaded', function() {
            options = {dismissible: false}
            var elems = document.querySelectorAll('.modal');
            var instances = M.Modal.init(elems, options);
        });


        document.addEventListener('DOMContentLoaded', function() {
            var elems = document.querySelectorAll('.dropdown-trigger');
            var instances = M.Dropdown.init(elems, options);
        });


        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
            apiKey: "AIzaSyCg3JN8dalbWuzXgadDYPEF82ff9s2fK3Q",
            authDomain: "demoproject-10ac8.firebaseapp.com",
            databaseURL: "https://demoproject-10ac8-default-rtdb.firebaseio.com",
            projectId: "demoproject-10ac8",
            storageBucket: "demoproject-10ac8.appspot.com",
            messagingSenderId: "734975493795",
            appId: "1:734975493795:web:970887186e181c26c86116",
            measurementId: "G-GT5LE219G4"
        };
	    // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        
        

        const database = firebase.database();











        const button1 = document.getElementById("button1")

        // button1.addEventListener("click",(e) => {

        //     console.log("click");

        //     firebase.database().ref('songs/3/').set({
        //         "title": "xyz",
        //         "band": "the zyx",
        //         "genre": "mathcore",
        //         "description": "music",
        //         "link": "naaaa",
        //         "concepts": "locrian scale",
        //         "approved": true
        //     });



        // });




        const songForm = document.getElementById("songForm")

           // <!-- song submission - create card -->

        songForm.addEventListener("submit", (e) => {

        e.preventDefault()

        suggestedSong = songForm["song_title"].value

        suggestion = {
            "title": suggestedSong,
            "band": suggestedBand,
            "genre": suggestedGenre,
            "approved": false,
            "description": suggestedDesc,
            "link": suggestedLink,
            "concepts": suggestedConcepts
        }


        sugID = ""
        accLast = accNums.length - 1
        sugLast = sugNums.length - 1



        if (parseInt(accNums[accLast]) > parseInt(sugNums[sugLast])) {
            sugID = parseInt(accNums[accLast]) + 1
        } else {
            sugID = parseInt(sugNums[sugLast]) + 1
        }

        sugID = sugID.toString()

        console.log(sugID)
        console.log(accNums)
        console.log(sugNums)
        console.log("accLast " + accNums[accLast])
        console.log("sugLast " + sugNums[sugLast])



        // FIX THIS SO YOU CAN GET THE LAST KEY IN DATABASE + 1
        database.ref('songs/' + sugID + '/').set(suggestion)

        // cardInfo.push(suggestion)

        // console.log(cardInfo)

        // newDiv = document.createElement("div")
        // newDiv.innerHTML = createCard(suggestedSong,suggestedBand,suggestedGenre)
        // cardDisplay.appendChild(newDiv)

        const modal = document.querySelector("#song-modal")
        M.Modal.getInstance(modal).close();



        });


    </script>
    
</body>
</html>